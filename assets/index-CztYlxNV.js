(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const s="image/jpeg",d=.3,b=async(a,t,e)=>{const c=y(a),r=t||.001;if(o(c))return await v(c,r,e);if(T(c))return await U(c,r,e);throw new Error("Unsupported URL, only HTTP and Blob URLs are supported")},y=a=>{if(typeof a=="string")return a;if(!o(a.src))throw new Error("Cannot find the video source URL");return a.src},o=a=>{if(a.startsWith("http://")&&!a.startsWith("http://localhost"))throw new Error("HTTP cannot be used");return a.startsWith("https://")||a.startsWith("http://localhost")},T=a=>a.startsWith("blob:"),v=(a,t,e)=>new Promise(c=>{const r=h(L(a,t));r.addEventListener("seeked",async()=>{var u;const n=m(f(r,e==null?void 0:e.size));n.drawImage(r,0,0,n.canvas.width,n.canvas.height);const i=await g(n.canvas,(e==null?void 0:e.format)||s,(e==null?void 0:e.quality)||d),l=URL.createObjectURL(i);(u=e==null?void 0:e.onBlobCreated)==null||u.call(e,{blob:i,blobUrl:l,thumbnailPosition:t}),c(l)})}),L=(a,t)=>{const e=new URL(a);return e.hash=`t=${t}`,e.toString()},U=(a,t,e)=>new Promise(c=>{const r=h(a);r.addEventListener("seeked",async()=>{var u;await new Promise(w=>setTimeout(w,100));const n=m(f(r,e==null?void 0:e.size));n.drawImage(r,0,0,n.canvas.width,n.canvas.height);const i=await g(n.canvas,(e==null?void 0:e.format)||s,(e==null?void 0:e.quality)||d),l=URL.createObjectURL(i);(u=e==null?void 0:e.onBlobCreated)==null||u.call(e,{blob:i,blobUrl:l,thumbnailPosition:t}),c(l)}),r.addEventListener("loadedmetadata",()=>{r.currentTime=t})}),h=a=>{const t=document.createElement("video");return t.src=a,t.crossOrigin="anonymous",t.preload="metadata",t},m=({width:a,height:t})=>{const e=document.createElement("canvas");e.width=a,e.height=t;const c=e.getContext("2d");if(!c)throw new Error("Failed to get 2d context");return c},f=(a,t)=>{if(!t)return{width:a.videoWidth,height:a.videoHeight};if(t.width&&t.height)return t;const e=a.videoWidth/a.videoHeight;if(t.width)return{width:t.width,height:t.width/e};if(t.height)return{width:t.height*e,height:t.height};throw new Error("Invalid size option")},g=(a,t,e)=>new Promise(c=>a.toBlob(r=>{if(!r)throw new Error("Failed to create a blob");c(r)},t,e)),E=document.querySelector("input#file-input"),P=document.querySelector("input#time-input"),R=document.querySelector("form"),q=document.querySelector("section#thumbnail-container"),C=document.querySelector("template#thumbnail-template");R.addEventListener("submit",async a=>{var i;a.preventDefault();const t=(i=E.files)==null?void 0:i[0];if(!t){alert("Please select a file");return}const e=URL.createObjectURL(t),c=t.name,r=Number(P.value),n=await b(e,r,{format:"image/jpeg",quality:.3,size:{width:320}});q.appendChild(S(n,r,c))});const S=(a,t,e)=>{const c=C.content.cloneNode(!0),r=c.querySelector("img");r.src=a;const n=c.querySelector("p");return n.textContent=`Time: ${t}s (${e})`,c};
